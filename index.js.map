{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const TelegramBot = require('node-telegram-bot-api');\nconst axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\n// require('dotenv').config();\n\n// const token = process.env.TELEGRAM_BOT_TOKEN;\n// const VK_ACCESS_TOKEN = process.env.VK_ACCESS_TOKEN;\n// const VK_GROUP_ID = process.env.VK_GROUP_ID;\n// const FB_ACCESS_TOKEN = process.env.FB_ACCESS_TOKEN;\n// const FB_PAGE_ID = process.env.FB_PAGE_ID;\n\n// Вставь свой токен от BotFather\nconst token = 'YOUR_TELEGRAM_BOT_TOKEN';\nconst bot = new TelegramBot(token, { polling: true });\n\n// Вставь свои токены и идентификаторы\nconst VK_ACCESS_TOKEN = '7221040223:AAEpbCjOZCxdJAnLtB3JYPNndaBP-tvDdSI';\nconst VK_GROUP_ID = 'YOUR_VK_GROUP_ID';\nconst FB_ACCESS_TOKEN = 'YOUR_FB_ACCESS_TOKEN';\nconst FB_PAGE_ID = 'YOUR_FB_PAGE_ID';\n\n// Обработка новых сообщений в канале\nbot.on('message', async msg => {\n  if (msg.chat.type === 'channel') {\n    const { text, caption, photo } = msg;\n\n    // Отправка текста и ссылок в VK\n    if (text || caption) {\n      await axios.post(`https://api.vk.com/method/wall.post`, {\n        owner_id: `-${VK_GROUP_ID}`,\n        from_group: 1,\n        message: text || caption,\n        access_token: VK_ACCESS_TOKEN,\n        v: '5.131',\n      });\n    }\n\n    // Отправка фото в VK\n    if (photo) {\n      const fileId = photo[photo.length - 1].file_id; // Получаем ID фото\n      const fileLink = await bot.getFileLink(fileId);\n\n      await axios.post(`https://api.vk.com/method/wall.post`, {\n        owner_id: `-${VK_GROUP_ID}`,\n        from_group: 1,\n        attachments: fileLink,\n        access_token: VK_ACCESS_TOKEN,\n        v: '5.131',\n      });\n    }\n\n    // Отправка текста и фото в Facebook\n    if (text || caption || photo) {\n      const form = new FormData();\n      form.append('access_token', FB_ACCESS_TOKEN);\n      form.append('message', text || caption);\n\n      if (photo) {\n        const fileId = photo[photo.length - 1].file_id;\n        const fileLink = await bot.getFileLink(fileId);\n        form.append('source', fs.createReadStream(fileLink));\n      }\n\n      await axios.post(`https://graph.facebook.com/${FB_PAGE_ID}/feed`, form, {\n        headers: form.getHeaders(),\n      });\n    }\n  }\n});\n"],"names":["TelegramBot","axios","fs","token","bot","VK_ACCESS_TOKEN","VK_GROUP_ID","FB_ACCESS_TOKEN","FB_PAGE_ID","msg","text","caption","photo","fileId","fileLink","form"],"mappings":"ssBAAA,MAAMA,EAAc,QAAQ,uBAAuB,EAC7CC,EAAQ,QAAQ,OAAO,EACvBC,EAAK,QAAQ,IAAI,EACV,QAAQ,MAAM,EAW3B,MAAMC,EAAQ,0BACRC,EAAM,IAAIJ,EAAYG,EAAO,CAAE,QAAS,GAAM,EAG9CE,EAAkB,iDAClBC,EAAc,mBACdC,EAAkB,uBAClBC,EAAa,kBAGnBJ,EAAI,GAAG,UAAW,MAAMK,GAAO,CACzB,GAAAA,EAAI,KAAK,OAAS,UAAW,CAC/B,KAAM,CAAE,KAAAC,EAAM,QAAAC,EAAS,MAAAC,CAAA,EAAUH,EAcjC,IAXIC,GAAQC,IACJ,MAAAV,EAAM,KAAK,sCAAuC,CACtD,SAAU,IAAIK,CAAW,GACzB,WAAY,EACZ,QAASI,GAAQC,EACjB,aAAcN,EACd,EAAG,OAAA,CACJ,EAICO,EAAO,CACT,MAAMC,EAASD,EAAMA,EAAM,OAAS,CAAC,EAAE,QACjCE,EAAW,MAAMV,EAAI,YAAYS,CAAM,EAEvC,MAAAZ,EAAM,KAAK,sCAAuC,CACtD,SAAU,IAAIK,CAAW,GACzB,WAAY,EACZ,YAAaQ,EACb,aAAcT,EACd,EAAG,OAAA,CACJ,CACH,CAGI,GAAAK,GAAQC,GAAWC,EAAO,CACtB,MAAAG,EAAO,IAAI,SAIjB,GAHKA,EAAA,OAAO,eAAgBR,CAAe,EACtCQ,EAAA,OAAO,UAAWL,GAAQC,CAAO,EAElCC,EAAO,CACT,MAAMC,EAASD,EAAMA,EAAM,OAAS,CAAC,EAAE,QACjCE,EAAW,MAAMV,EAAI,YAAYS,CAAM,EAC7CE,EAAK,OAAO,SAAUb,EAAG,iBAAiBY,CAAQ,CAAC,CACrD,CAEA,MAAMb,EAAM,KAAK,8BAA8BO,CAAU,QAASO,EAAM,CACtE,QAASA,EAAK,WAAW,CAAA,CAC1B,CACH,CACF,CACF,CAAC"}